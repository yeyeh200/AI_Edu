# AI助评应用数据模型总览

---

**文档编号：** HKHR-DM-2025-001
**项目名称：** AI助力教学评价应用（样板工程）
**编制单位：** 教务处信息技术中心
**编制日期：** 2025年11月23日
**文档版本：** V1.0
**审阅人：** 项目技术组
**批准人：** 项目领导小组

---

## 文档修订记录

| 版本 | 修订日期 | 修订内容 | 修订人 |
|------|----------|----------|--------|
| V1.0 | 2025-11-23 | 初始版本创建 | 项目组 |
|      |          |          |        |

---

## 目录

1. [概述](#1-概述)
2. [数据模型架构](#2-数据模型架构)
3. [核心数据实体](#3-核心数据实体)
4. [数据实体索引](#4-数据实体索引)
5. [数据关系图谱](#5-数据关系图谱)
6. [数据模型规范](#6-数据模型规范)
7. [技术实现说明](#7-技术实现说明)

---

## 1. 概述

### 1.1 目的

本文档是AI助评应用数据模型的总体规划文档，定义了系统中的所有核心数据实体、关系结构和设计规范。通过统一的数据模型设计，确保系统在数据处理、存储、分析和展示过程中的一致性和准确性。

### 1.2 范围

**数据源范围：**
- 职教云平台数据：46个数据表
- 教务系统数据：25个数据表
- 竞赛系统数据：12个数据表
- 总计：83个源数据表

**数据模型范围：**
- 用户与权限模型：统一用户身份和权限管理
- 教学资源模型：课程、教室、教材等教学资源
- 教学活动模型：课堂教学、在线学习等教学活动
- 评价分析模型：教学质量评价和分析相关数据
- 系统管理模型：系统配置、日志、监控等数据

**数据应用范围：**
- 教学质量评估：多维度教学质量评价
- 数据分析报告：各类统计和分析报告
- 实时监控展示：数据大屏和仪表盘展示
- 智能推荐预警：基于AI的智能推荐和预警

### 1.3 设计原则

**数据一致性原则：**
- 统一数据标准和命名规范
- 保证数据在不同系统间的一致性
- 建立完善的数据校验机制

**数据安全性原则：**
- 敏感数据加密存储
- 基于角色的数据访问控制
- 完整的数据操作审计

**性能优化原则：**
- 合理的数据表结构设计
- 有效的索引策略
- 支持高并发访问

**可扩展性原则：**
- 模块化数据模型设计
- 预留扩展字段和表结构
- 支持业务需求变化

---

## 2. 数据模型架构

### 2.1 分层架构设计

```
┌─────────────────────────────────────────────────────────────┐
│                    应用展示层（ADS）                         │
│  • 教学质量汇总表  • 统计指标表  • 报表数据表  • API接口表     │
├─────────────────────────────────────────────────────────────┤
│                    数据汇总层（DWS）                         │
│  • 教师质量汇总  • 学生行为汇总  • 课程质量汇总  • 院系汇总表   │
├─────────────────────────────────────────────────────────────┤
│                    数据清洗层（DWD）                         │
│  • 统一用户表    • 统一课程表    • 统一时间表    • 统一维度表   │
├─────────────────────────────────────────────────────────────┤
│                    原始数据层（ODS）                         │
│  • 职教云数据    • 教务数据      • 竞赛数据     • 外部数据      │
└─────────────────────────────────────────────────────────────┘
```

### 2.2 数据域划分

**用户域（User Domain）：**
- 用户基本信息
- 用户身份认证
- 权限和角色
- 用户行为日志

**教学域（Teaching Domain）：**
- 课程信息
- 教学资源
- 教学活动
- 教学计划

**评价域（Evaluation Domain）：**
- 评价标准
- 评价记录
- 评价结果
- 改进建议

**分析域（Analysis Domain）：**
- 统计指标
- 趋势分析
- 预警规则
- 智能推荐

### 2.3 数据模型分类

**维度模型（Dimension Models）：**
- 时间维度
- 组织维度
- 用户维度
- 课程维度

**事实模型（Fact Models）：**
- 教学活动事实
- 评价结果事实
- 用户行为事实
- 系统操作事实

**聚合模型（Aggregate Models）：**
- 日统计聚合
- 周统计聚合
- 月统计聚合
- 学期统计聚合

---

## 3. 核心数据实体

### 3.1 用户管理实体

| 实体名称 | 实体描述 | 主要属性 | 关联关系 |
|----------|----------|----------|----------|
| User | 用户基本信息 | 用户ID、姓名、类型、状态、联系方式 | 关联UserProfile、UserRole |
| UserProfile | 用户详细档案 | 用户ID、档案信息、照片、简历 | 属于User |
| UserRole | 用户角色关系 | 用户ID、角色ID、分配时间 | 关联User、Role |
| Role | 角色定义 | 角色ID、角色名称、权限、描述 | 关联Permission |
| Permission | 权限定义 | 权限ID、权限名称、类型、资源 | 关联Role |

### 3.2 教学资源实体

| 实体名称 | 实体描述 | 主要属性 | 关联关系 |
|----------|----------|----------|----------|
| Course | 课程信息 | 课程ID、名称、代码、学分、学时 | 关联CourseCategory、Teacher |
| CourseCategory | 课程分类 | 分类ID、名称、父分类、层级 | 关联Course |
| Teacher | 教师信息 | 教师ID、姓名、工号、职称、院系 | 关联User、Faculty |
| Faculty | 院系信息 | 院系ID、名称、代码、负责人 | 关联Teacher、Major |
| Major | 专业信息 | 专业ID、名称、代码、院系ID | 关联Faculty、Class |
| Class | 班级信息 | 班级ID、名称、专业、年级、人数 | 关联Major、Student |
| Classroom | 教室信息 | 教室ID、名称、类型、容量、位置 | 关联Schedule |

### 3.3 教学活动实体

| 实体名称 | 实体描述 | 主要属性 | 关联关系 |
|----------|----------|----------|----------|
| Schedule | 课程安排 | 安排ID、课程ID、教师ID、时间、地点 | 关联Course、Teacher、Classroom |
| TeachingActivity | 教学活动 | 活动ID、类型、内容、时间、参与者 | 关联Course、Student |
| Attendance | 考勤记录 | 记录ID、学生ID、课程ID、状态、时间 | 关联Student、Course |
| Assignment | 作业信息 | 作业ID、课程ID、标题、要求、截止时间 | 关联Course、Student |
| Submission | 作业提交 | 提交ID、作业ID、学生ID、内容、时间 | 关联Assignment、Student |
| Exam | 考试信息 | 考试ID、课程ID、类型、时间、地点 | 关联Course、Student |
| ExamResult | 考试成绩 | 成绩ID、考试ID、学生ID、分数、评价 | 关联Exam、Student |

### 3.4 评价分析实体

| 实体名称 | 实体描述 | 主要属性 | 关联关系 |
|----------|----------|----------|----------|
| EvaluationTemplate | 评价模板 | 模板ID、名称、指标、权重、规则 | 关联EvaluationRecord |
| EvaluationRecord | 评价记录 | 记录ID、模板ID、被评价人、评价人、时间 | 关联Template、User |
| EvaluationIndicator | 评价指标 | 指标ID、名称、类型、标准、权重 | 关联Template |
| EvaluationResult | 评价结果 | 结果ID、记录ID、指标ID、得分、评语 | 关联Record、Indicator |
| QualityScore | 质量评分 | 评分ID、教师ID、课程ID、维度、分数 | 关联Teacher、Course |
| ImprovementSuggestion | 改进建议 | 建议ID、对象ID、类型、内容、优先级 | 关联User、Course |

### 3.5 系统管理实体

| 实体名称 | 实体描述 | 主要属性 | 关联关系 |
|----------|----------|----------|----------|
| SystemConfig | 系统配置 | 配置ID、键、值、类型、描述 | 无 |
| OperationLog | 操作日志 | 日志ID、用户ID、操作、时间、IP | 关联User |
| DataSyncLog | 同步日志 | 日志ID、源系统、时间、状态、记录数 | 无 |
| AlertRule | 预警规则 | 规则ID、名称、条件、动作、状态 | 关联AlertRecord |
| AlertRecord | 预警记录 | 记录ID、规则ID、对象、时间、状态 | 关联AlertRule |

---

## 4. 数据实体索引

### 4.1 用户管理域数据实体

| 序号 | 实体名称 | 文档名称 | 文档路径 |
|------|----------|----------|----------|
| 01 | User | 用户基本信息实体 | [01-用户管理域/DM-USER-001-用户基本信息实体.md](01-用户管理域/DM-USER-001-用户基本信息实体.md) |
| 02 | UserProfile | 用户详细档案实体 | [01-用户管理域/DM-USER-002-用户详细档案实体.md](01-用户管理域/DM-USER-002-用户详细档案实体.md) |
| 03 | UserRole | 用户角色关系实体 | [01-用户管理域/DM-USER-003-用户角色关系实体.md](01-用户管理域/DM-USER-003-用户角色关系实体.md) |
| 04 | Role | 角色定义实体 | [01-用户管理域/DM-USER-004-角色定义实体.md](01-用户管理域/DM-USER-004-角色定义实体.md) |
| 05 | Permission | 权限定义实体 | [01-用户管理域/DM-USER-005-权限定义实体.md](01-用户管理域/DM-USER-005-权限定义实体.md) |

### 4.2 教学资源域数据实体

| 序号 | 实体名称 | 文档名称 | 文档路径 |
|------|----------|----------|----------|
| 06 | Course | 课程信息实体 | [02-教学资源域/DM-COURSE-001-课程信息实体.md](02-教学资源域/DM-COURSE-001-课程信息实体.md) |
| 07 | CourseCategory | 课程分类实体 | [02-教学资源域/DM-COURSE-002-课程分类实体.md](02-教学资源域/DM-COURSE-002-课程分类实体.md) |
| 08 | Teacher | 教师信息实体 | [02-教学资源域/DM-COURSE-003-教师信息实体.md](02-教学资源域/DM-COURSE-003-教师信息实体.md) |
| 09 | Faculty | 院系信息实体 | [02-教学资源域/DM-COURSE-004-院系信息实体.md](02-教学资源域/DM-COURSE-004-院系信息实体.md) |
| 10 | Major | 专业信息实体 | [02-教学资源域/DM-COURSE-005-专业信息实体.md](02-教学资源域/DM-COURSE-005-专业信息实体.md) |
| 11 | Class | 班级信息实体 | [02-教学资源域/DM-COURSE-006-班级信息实体.md](02-教学资源域/DM-COURSE-006-班级信息实体.md) |
| 12 | Classroom | 教室信息实体 | [02-教学资源域/DM-COURSE-007-教室信息实体.md](02-教学资源域/DM-COURSE-007-教室信息实体.md) |
| 13 | Textbook | 教材信息实体 | [02-教学资源域/DM-COURSE-008-教材信息实体.md](02-教学资源域/DM-COURSE-008-教材信息实体.md) |

### 4.3 教学活动域数据实体

| 序号 | 实体名称 | 文档名称 | 文档路径 |
|------|----------|----------|----------|
| 14 | Schedule | 课程安排实体 | [03-教学活动域/DM-ACTIVITY-001-课程安排实体.md](03-教学活动域/DM-ACTIVITY-001-课程安排实体.md) |
| 15 | TeachingActivity | 教学活动实体 | [03-教学活动域/DM-ACTIVITY-002-教学活动实体.md](03-教学活动域/DM-ACTIVITY-002-教学活动实体.md) |
| 16 | Attendance | 考勤记录实体 | [03-教学活动域/DM-ACTIVITY-003-考勤记录实体.md](03-教学活动域/DM-ACTIVITY-003-考勤记录实体.md) |
| 17 | Assignment | 作业信息实体 | [03-教学活动域/DM-ACTIVITY-004-作业信息实体.md](03-教学活动域/DM-ACTIVITY-004-作业信息实体.md) |
| 18 | Submission | 作业提交实体 | [03-教学活动域/DM-ACTIVITY-005-作业提交实体.md](03-教学活动域/DM-ACTIVITY-005-作业提交实体.md) |
| 19 | Exam | 考试信息实体 | [03-教学活动域/DM-ACTIVITY-006-考试信息实体.md](03-教学活动域/DM-ACTIVITY-006-考试信息实体.md) |
| 20 | ExamResult | 考试成绩实体 | [03-教学活动域/DM-ACTIVITY-007-考试成绩实体.md](03-教学活动域/DM-ACTIVITY-007-考试成绩实体.md) |
| 21 | CourseResource | 课程资源实体 | [03-教学活动域/DM-ACTIVITY-008-课程资源实体.md](03-教学活动域/DM-ACTIVITY-008-课程资源实体.md) |

### 4.4 评价分析域数据实体

| 序号 | 实体名称 | 文档名称 | 文档路径 |
|------|----------|----------|----------|
| 22 | EvaluationTemplate | 评价模板实体 | [04-评价分析域/DM-EVAL-001-评价模板实体.md](04-评价分析域/DM-EVAL-001-评价模板实体.md) |
| 23 | EvaluationRecord | 评价记录实体 | [04-评价分析域/DM-EVAL-002-评价记录实体.md](04-评价分析域/DM-EVAL-002-评价记录实体.md) |
| 24 | EvaluationIndicator | 评价指标实体 | [04-评价分析域/DM-EVAL-003-评价指标实体.md](04-评价分析域/DM-EVAL-003-评价指标实体.md) |
| 25 | EvaluationResult | 评价结果实体 | [04-评价分析域/DM-EVAL-004-评价结果实体.md](04-评价分析域/DM-EVAL-004-评价结果实体.md) |
| 26 | QualityScore | 质量评分实体 | [04-评价分析域/DM-EVAL-005-质量评分实体.md](04-评价分析域/DM-EVAL-005-质量评分实体.md) |
| 27 | ImprovementSuggestion | 改进建议实体 | [04-评价分析域/DM-EVAL-006-改进建议实体.md](04-评价分析域/DM-EVAL-006-改进建议实体.md) |
| 28 | TeachingQualityReport | 教学质量报告实体 | [04-评价分析域/DM-EVAL-007-教学质量报告实体.md](04-评价分析域/DM-EVAL-007-教学质量报告实体.md) |

### 4.5 系统管理域数据实体

| 序号 | 实体名称 | 文档名称 | 文档路径 |
|------|----------|----------|----------|
| 29 | SystemConfig | 系统配置实体 | [05-系统管理域/DM-SYS-001-系统配置实体.md](05-系统管理域/DM-SYS-001-系统配置实体.md) |
| 30 | OperationLog | 操作日志实体 | [05-系统管理域/DM-SYS-002-操作日志实体.md](05-系统管理域/DM-SYS-002-操作日志实体.md) |
| 31 | DataSyncLog | 数据同步日志实体 | [05-系统管理域/DM-SYS-003-数据同步日志实体.md](05-系统管理域/DM-SYS-003-数据同步日志实体.md) |
| 32 | AlertRule | 预警规则实体 | [05-系统管理域/DM-SYS-004-预警规则实体.md](05-系统管理域/DM-SYS-004-预警规则实体.md) |
| 33 | AlertRecord | 预警记录实体 | [05-系统管理域/DM-SYS-005-预警记录实体.md](05-系统管理域/DM-SYS-005-预警记录实体.md) |
| 34 | DataDictionary | 数据字典实体 | [05-系统管理域/DM-SYS-006-数据字典实体.md](05-系统管理域/DM-SYS-006-数据字典实体.md) |

---

## 5. 数据关系图谱

### 5.1 核心实体关系图

```
                    User (用户)
                    ├─ UserProfile (用户档案)
                    ├─ UserRole (用户角色)
                    │  └─ Role (角色)
                    │     └─ Permission (权限)
                    ├─ Teacher (教师)
                    │  └─ Faculty (院系)
                    │     └─ Major (专业)
                    │        └─ Class (班级)
                    │           └─ Student (学生)
                    └─ Student (学生)
                       ├─ Attendance (考勤)
                       ├─ Submission (作业提交)
                       ├─ ExamResult (考试成绩)
                       └─ EvaluationRecord (评价记录)

                    Course (课程)
                    ├─ CourseCategory (课程分类)
                    ├─ Schedule (课程���排)
                    │  ├─ TeachingActivity (教学活动)
                    │  ├─ Assignment (作业)
                    │  └─ Exam (考试)
                    ├─ CourseResource (课程资源)
                    └─ EvaluationRecord (评价记录)
                       └─ EvaluationResult (评价结果)

                    EvaluationTemplate (评价模板)
                    ├─ EvaluationIndicator (评价指标)
                    └─ EvaluationRecord (评价记录)
                       └─ QualityScore (质量评分)
                          └─ ImprovementSuggestion (改进建议)
```

### 5.2 数据流向图

```
原始数据源 (ODS)
       ↓
   数据清洗 (DWD)
       ↓
   数据汇总 (DWS)
       ↓
   数据应用 (ADS)

职教云数据 → 教学活动实体 → 评价分析实体 → 应用展示
教务数据   → 教学资源实体 → 质量评分实体 → 报表生成
竞赛数据   → 用户管理实体 → 系统管理实体 → 监控预警
```

### 5.3 关键关系说明

**用户与教学关系：**
- 一个教师可以教授多门课程
- 一个学生可以选修多门课程
- 一个课程可以有多个教师和学生

**评价与教学质量关系：**
- 一个评价模板包含多个评价指标
- 一个评价记录包含多个评价结果
- 质量评分基于评价结果计算

**系统管理关系：**
- 用户操作产生操作日志
- 数据同步产生同步日志
- 预警规则触发预警记录

---

## 6. 数据模型规范

### 6.1 命名规范

**表命名规范：**
- 维度表：dim_实体名_说明
- 事实表：fact_业务域_说明
- 汇总表：agg_业务域_粒度_说明
- 字典表：dict_类型_说明

**字段命名规范：**
- 主键字段：id 或 表名_id
- 外键字段：关联表名_id
- 创建时间：create_time
- 更新时间：update_time
- 状态字段：status 或 is_删除标记

**索引命名规范：**
- 主键索引：pk_表名
- 唯一索引：uk_表名_字段名
- 普通索引：idx_表名_字段名
- 复合索引：idx_表名_字段名1_字段名2

### 6.2 数据类型规范

**常用数据类型：**
- BIGINT：主键、大数值ID
- INT：数量、状态码
- VARCHAR：名称、描述、代码
- TEXT：长文本、备注
- DECIMAL：分数、金额、精确数值
- DATETIME/TIMESTAMP：时间戳
- DATE：日期
- TINYINT：布尔值、枚举值

**数据长度规范：**
- 姓名字段：VARCHAR(50)
- 编码字段：VARCHAR(20)
- 名称字段：VARCHAR(100)
- 描述字段：VARCHAR(500)
- 备注字段：TEXT
- URL字段：VARCHAR(255)
- 邮箱字段：VARCHAR(100)

### 6.3 约束规范

**主键约束：**
- 每个表必须有主键
- 主键使用自增BIGINT类型
- 主键字段名统一为id

**外键约束：**
- 外键字段名为关联表名_id
- 外键必须建立索引
- 外键约束可选，建议在应用层控制

**唯一约束：**
- 业务唯一字段必须建立唯一约束
- 编码类字段通常需要唯一约束
- 唯一约束包含的字段要合理

**检查约束：**
- 状态字段使用检查约束
- 数值范围使用检查约束
- 枚举值使用检查约束

### 6.4 索引规范

**索引设计原则：**
- 为常用查询字段建立索引
- 为外键字段建立索引
- 为排序字段建立索引
- 避免过多索引影响写入性能

**索引类型选择：**
- 唯一索引：业务唯一字段
- 普通索引：常用查询字段
- 复合索引：多字段组合查询
- 全文索引：文本搜索字段

---

## 7. 技术实现说明

### 7.1 数据库选型

**主数据库：MySQL 8.0+**
- 支持ACID事务特性
- 丰富的索引类型
- 成熟的运维工具
- 良好的扩展性

**缓存数据库：Redis 6.0+**
- 高性能内存存储
- 丰富的数据结构
- 持久化支持
- 集群部署支持

**搜索引擎：Elasticsearch 7.10+（可选）**
- 全文检索功能
- 实时数据分析
- 可视化监控
- 分布式部署

### 7.2 ORM框架

**SQLAlchemy（Python）**
- 强大的对象关系映射
- 支持多种数据库
- 丰富的查询API
- 良好的性能表现

**主要特性：**
- 声明式模型定义
- 自动表结构管理
- 查询结果缓存
- 连接池管理

### 7.3 数据同步策略

**增量同步：**
- 基于时间戳的增量同步
- 基于日志的增量同步
- 实时触发式同步
- 定时批量同步

**全量同步：**
- 每日凌晨全量同步
- 数据异常时全量同步
- 初始化时全量同步
- 定期数据校验

**冲突处理：**
- 源系统优先原则
- 时间戳比较原则
- 人工审核机制
- 自动回滚机制

### 7.4 数据质量保证

**数据校验规则：**
- 必填字段校验
- 数据格式校验
- 业务规则校验
- 关联完整性校验

**数据清洗流程：**
- 重复数据识别
- 异常数据标记
- 数据格式标准化
- 缺失数据补全

**质量监控机制：**
- 数据质量评分
- 异常数据告警
- 质量趋势分析
- 定期质量报告

---

**文档编制：** 项目实施团队
**技术审核：** 数据架构师
**业务审核：** 业务分析师
**最终批准：** 项目领导小组

**联系方式：**
- 项目组邮箱：project@school.edu.cn
- 技术支持电话：xxx-xxxxxxxx
- 项目经理：xxx

---

*本数据模型总览文档为AI助评应用项目的重要设计文档，所有相关开发和实施工作应严格按照此文档执行。文档内容将根据项目实施过程中的实际情况进行动态调整和完善。*