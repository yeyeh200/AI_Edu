# EDU_EXAM_ARRANGE 监考安排表

## 基本信息

- **表名**：`EDU_EXAM_ARRANGE`（原表名：`V_BRW_EXAM_TEA`）
- **中文名称**：监考安排
- **用途**：存储教师监考安排信息，包括考试时间、地点、监考教师等详细信息
- **字段数量**：11个
- **数据类别**：教务系统 - 教学管理模块

## 字段定义

| 字段名 | 原字段名 | 数据类型 | 长度 | 是否为空 | 主键 | 默认值 | 备注 |
|--------|----------|----------|------|----------|------|--------|------|
| xn | 学年 | char | - | NO | YES | - | 如，"2009"表示2009-2010学年 |
| xq_id | 学期ID | char | - | NO | YES | - | 0第一学期，1第二学期，2第三学期 |
| gh | 教师工号 | char | - | NO | YES | - | - |
| xm | 姓名 | char | - | YES | NO | - | - |
| user_kcdm | 课程代码 | char | - | NO | YES | - | - |
| kcmc | 课程名称 | char | - | YES | NO | - | - |
| ZXF | 学分 | numeric | - | YES | NO | - | - |
| pc | 批次 | int | - | NO | YES | - | - |
| ksrq | 考试日期 | datetime | - | NO | YES | - | - |
| kssj | 开始时间 | char | - | NO | YES | - | - |
| jssj | 结束时间 | char | - | NO | YES | - | - |
| ksdD_DM | 考试地点代码 | char | - | NO | YES | - | - |

## 字段详细说明

### 主键字段
- **xn**：学年，主键组成部分
- **xq_id**：学期ID，主键组成部分
- **gh**：教师工号，主键组成部分
- **user_kcdm**：课程代码，主键组成部分
- **pc**：批次，主键组成部分
- **ksrq**：考试日期，主键组成部分
- **kssj**：开始时间，主键组成部分
- **ksdD_DM**：考试地点代码，主键组成部分

### 教师信息字段
- **gh**：教师工号，唯一标识教师
- **xm**：教师姓名，监考教师姓名

### 课程信息字段
- **user_kcdm**：课程代码，考试课程代码
- **kcmc**：课程名称，考试课程名称
- **ZXF**：学分，课程学分

### 考试时间字段
- **pc**：批次，考试场次编号
- **ksrq**：考试日期，具体考试日期
- **kssj**：开始时间，考试开始时间
- **jssj**：结束时间，考试结束时间

### 考试地点字段
- **ksdD_DM**：考试地点代码，考场教室代码

## 学期信息说明

### 学年格式
- **格式说明**：如"2009"表示2009-2010学年
- **命名规范**：使用起始年份作为学年标识
- **时间范围**：通常从当年9月至次年7月

### 学期定义
| 学期代码 | 学期名称 | 时间范围 | 说明 |
|----------|----------|----------|------|
| 0 | 第一学期 | 9月-次年1月 | 秋季学期 |
| 1 | 第二学期 | 2月-7月 | 春季学期 |
| 2 | 第三学期 | 7月-8月 | 夏季学期（短学期） |

## 考试批次说明

### 批次（pc）定义
- **批次编号**：按自然顺序编号（1, 2, 3...）
- **批次目的**：区分同一天的不同考试场次
- **批次管理**：便于考试组织和时间安排

### 常见批次安排
- **上午场次**：批次1-3，通常在8:00-12:00
- **下午场次**：批次4-6，通常在14:00-18:00
- **晚上场次**：批次7-8，通常在19:00-21:00

## 时间安排说明

### 时间格式标准
- **日期格式**：YYYY-MM-DD
- **时间格式**：HH:MM（24小时制）
- **示例**：2024-01-15 09:00

### 考试时长计算
```
考试时长 = 结束时间 - 开始时间
```

### 常见考试时长
- **短时考试**：1-2小时，适用于单元测验
- **标准考试**：2-3小时，适用于期末考试
- **长时考试**：3-4小时，适用于综合性考试
- **特殊考试**：根据特殊要求确定时长

## 考试地点说明

### 地点代码规范
- **教室编码**：使用学校统一的教室编码
- **校区标识**：包含校区信息避免冲突
- **容量标识**：包含考场容量信息

### 地点类型分类
- **普通教室**：标准教室用于常规考试
- **大型教室**：阶梯教室用于大班考试
- **专用考场**：专门用于考试的特殊教室
- **实验室**：用于实践性课程考试

## 监考安排原则

### 教师分配原则
1. **专业匹配**：优先安排专业相关教师
2. **工作量均衡**：均衡分配监考任务
3. **时间避免冲突**：避免与教师授课时间冲突
4. **合理安排**：考虑教师的特殊情况

### 监考人数要求
- **小班考试**：30人以下，1-2名监考教师
- **中班考试**：30-60人，2名监考教师
- **大班考试**：60-100人，2-3名监考教师
- **超大班考试**：100人以上，3名以上监考教师

### 监考职责
1. **考场准备**：提前准备考场设备
2. **身份核验**：核验学生身份信息
3. **秩序维护**：维护考场秩序
4. **作弊防范**：预防和处理作弊行为
5. **试卷回收**：确保试卷完整回收

## 数据约束

1. **主键约束**：`xn, xq_id, gh, user_kcdm, pc, ksrq, kssj, ksdD_DM` 组合必须唯一
2. **非空约束**：主键字段必须非空
3. **时间约束**：结束时间必须晚于开始时间
4. **数值约束**：学分和批次字段应为正数

## 索引建议

- **复合主键索引**：`xn, xq_id, gh, pc, ksrq` - 主键自动创建唯一索引
- **教师索引**：`gh` - 用于查询教师监考安排
- **课程索引**：`user_kcdm` - 用于查询课程监考安排
- **日期索引**：`ksrq` - 用于按日期查询考试安排
- **地点索引**：`ksdD_DM` - 用于按地点查询考场安排
- **批次索引**：`pc` - 用于按批次查询

## 数据关联关系

### 主要外键关联
- **教师信息表**：通过 `gh` 关联教师基本信息
- **课程信息表**：通过 `user_kcdm` 关联课程详细信息
- **教室信息表**：通过 `ksdD_DM` 关联教室详细信息
- **学生考试表**：关联学生考试安排信息

### 业务关联
- **考试安排表**：关联考试的整体安排信息
- **学生成绩表**：关联考试成绩录入
- **考场分配表**：关联考场的具体分配
- **考试科目表**：关联考试科目详细信息

## 使用示例

### SQL查询示例

```sql
-- 查询某教师的监考安排
SELECT xn, xq_id, kcmc, pc, ksrq, kssj, jssj, ksdD_DM, ZXF
FROM EDU_EXAM_ARRANGE
WHERE gh = 'T001' AND xn = '2024'
ORDER BY ksrq, kssj;

-- 查询某日期的考试安排
SELECT gh, xm, kcmc, kssj, jssj, ksdD_DM, pc
FROM EDU_EXAM_ARRANGE
WHERE ksrq = '2024-01-15' AND xn = '2024' AND xq_id = '0'
ORDER BY kssj, pc;

-- 查询某课程的考试安排
SELECT ksrq, kssj, jssj, ksdD_DM, pc, gh, xm
FROM EDU_EXAM_ARRANGE
WHERE user_kcdm = 'CS001' AND xn = '2024'
ORDER BY ksrq;

-- 统计教师监考工作量
SELECT
    gh,
    xm,
    COUNT(*) as invigilation_count,
    SUM(ZXF) as total_credits,
    COUNT(DISTINCT user_kcdm) as course_types
FROM EDU_EXAM_ARRANGE
WHERE xn = '2024' AND xq_id = '0'
GROUP BY gh, xm
ORDER BY invigilation_count DESC;

-- 查询考场使用情况
SELECT
    ksdD_DM,
    COUNT(*) as exam_count,
    COUNT(DISTINCT ksrq) as exam_days,
    COUNT(DISTINCT gh) as teacher_count
FROM EDU_EXAM_ARRANGE
WHERE xn = '2024' AND xq_id = '1'
GROUP BY ksdD_DM
ORDER BY exam_count DESC;
```

### 数据插入示例

```sql
INSERT INTO EDU_EXAM_ARRANGE (
    xn, xq_id, gh, xm, user_kcdm, kcmc, ZXF,
    pc, ksrq, kssj, jssj, ksdD_DM
) VALUES (
    '2024', '0', 'T001', '张老师', 'CS001', '数据结构', 4.0,
    1, '2024-01-15', '09:00', '11:00', 'J101'
);
```

## 业务逻辑说明

### 监考安排流程
1. **考试计划**：制定学期考试安排计划
2. **教师分配**：为每场考试分配监考教师
3. **时间协调**：协调考试时间避免冲突
4. **场地安排**：安排合适的考试场地
5. **信息发布**：发布监考安排信息

### 安排优化原则
1. **时间合理性**：避免教师连续监考
2. **专业性**：优先安排相关专业教师
3. **公平性**：均衡分配监考任务
4. **应急准备**：准备应急监考教师

### 冲突检测
1. **时间冲突**：同一教师同一时间安排多场监考
2. **课程冲突**：监考与教师授课时间冲突
3. **场地冲突**：同一考场同一时间安排多场考试
4. **人数冲突**：监考教师人数不足或过多

## 数据维护建议

### 定期维护
1. **信息更新**：及时更新监考安排信息
2. **变更处理**：处理监考安排变更
3. **教师信息**：维护教师基本信息
4. **考场信息**：维护考场基本信息

### 异常处理
1. **冲突检测**：检测并处理安排冲突
2. **教师调整**：处理教师临时不能监考的情况
3. **考场调整**：处理考场临时变更
4. **时间调整**：处理考试时间变更

### 质量控制
1. **完整性检查**：确保监考安排信息完整
2. **合理性检查**：检查安排的合理性
3. **及时性检查**：确保安排信息及时更新
4. **准确性检查**：确保信息准确无误

---

**数据来源**：教务管理系统
**维护单位**：教务处、各院系
**更新频率**：期末考试期间集中更新，平时可调整