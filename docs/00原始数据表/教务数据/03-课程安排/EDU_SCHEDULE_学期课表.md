# EDU_SCHEDULE 学期课表表

## 基本信息

- **表名**：`EDU_SCHEDULE`（原表名：`V_BRW_Schedule`）
- **中文名称**：学期课表
- **用途**：存储学期课程安排信息，包括上课时间、地点、教师、班级等详细信息
- **字段数量**：21个
- **数据类别**：教务系统 - 课程安排模块

## 字段定义

| 字段名 | 原字段名 | 数据类型 | 长度 | 是否为空 | 主键 | 默认值 | 备注 |
|--------|----------|----------|------|----------|------|--------|------|
| xn | 学年 | char | - | NO | YES | - | 如，2009表示2009-2010学年 |
| xq_id | 学期 | char | - | NO | YES | - | 0第一学期，1第二学期，2第三学期 |
| kcid | 课程ID | char | - | YES | NO | - | - |
| user_kcdm | 课程代码 | char | - | NO | YES | - | - |
| kcmc | 课程名称 | char | - | YES | NO | - | - |
| skbj | 上课班号 | char | - | NO | YES | - | - |
| zjjs_dm | 任课教师ID | char | - | YES | NO | - | - |
| zjjs_gh | 任课教师工号 | char | - | NO | YES | - | - |
| zjjs_xm | 任课教师姓名 | char | - | YES | NO | - | - |
| user_bjdm | 班级代码 | char | - | NO | YES | - | - |
| bjmc | 班级名称 | char | - | YES | NO | - | - |
| stimezc | 周次 | char | - | NO | YES | - | 如：1-5,8-18 |
| dsz | 单双周 | char | - | NO | YES | - | 1单周，2双周，0全周 |
| jcinfo | 节次 | char | - | NO | YES | - | 如：1-2 |
| jcz | 大节 | char | - | NO | YES | - | kxy格式，如K12表示星期一第二大节 |
| room_DM | 上课地点代码 | char | - | NO | YES | - | - |
| room | 上课地点 | char | - | YES | NO | - | - |
| Analyse | 周次分析 | char | - | YES | NO | - | - |
| JCAnalyse | 节次分析 | char | - | YES | NO | - | - |
| skap | 上课周次节次 | char | - | YES | NO | - | 格式如：[3-20周]五[9-10节] |
| TKYY | 调课原因 | char | - | YES | NO | - | - |
| tk_flag | 调课标志 | char | - | YES | NO | - | 1表示已调课 |
| tk_time | 调课时间 | datetime | - | YES | NO | - | - |
| SKBJRS | 上课班级人数 | int | - | YES | NO | - | - |
| KHFS | 考试方式 | char | - | YES | NO | - | - |
| xf | 学分 | decimal | - | YES | NO | - | - |
| jsxs | 讲授学时 | decimal | - | YES | NO | - | - |

## 字段详细说明

### 主键字段
- **xn**：学年，主键组成部分
- **xq_id**：学期，主键组成部分
- **user_kcdm**：课程代码，主键组成部分
- **skbj**：上课班号，主键组成部分
- **zjjs_gh**：任课教师工号，主键组成部分
- **user_bjdm**：班级代码，主键组成部分
- **stimezc**：周次，主键组成部分
- **dsz**：单双周，主键组成部分
- **jcinfo**：节次，主键组成部分
- **jcz**：大节，主键组成部分
- **room_DM**：上课地点代码，主键组成部分

### 基本课程信息
- **kcid**：课程ID，课程的唯一标识
- **user_kcdm**：课程代码，课程的标准代码
- **kcmc**：课程名称，课程的中文名称

### 班级和教师信息
- **skbj**：上课班号，教学班的编号
- **zjjs_dm**：任课教师ID，教师的唯一标识
- **zjjs_gh**：任课教师工号，教师的工号
- **zjjs_xm**：任课教师姓名，教师姓名
- **user_bjdm**：班级代码，行政班级的代码
- **bjmc**：班级名称，行政班级的名称
- **SKBJRS**：上课班级人数，实际上课的学生人数

### 时间安排信息
- **stimezc**：周次，上课的周次范围，如1-5,8-18
- **dsz**：单双周，1单周，2双周，0全周
- **jcinfo**：节次，具体节次，如1-2
- **jcz**：大节，采用kxy格式
- **skap**：上课周次节次，格式如[3-20周]五[9-10节]

### 地点信息
- **room_DM**：上课地点代码，教室的代码
- **room**：上课地点，教室名称

### 分析和调整信息
- **Analyse**：周次分析，对周次的详细分析
- **JCAnalyse**：节次分析，对节次的详细分析

### 课程属性信息
- **KHFS**：考试方式，课程的考核方式
- **xf**：学分，课程学分
- **jsxs**：讲授学时，课程的讲授学时

### 调课信息
- **TKYY**：调课原因，调课的具体原因
- **tk_flag**：调课标志，1表示已调课
- **tk_time**：调课时间，调课的具体时间

## 时间格式说明

### 学年格式
- **格式示例**：2009表示2009-2010学年
- **时间范围**：通常从当年9月至次年7月

### 学期定义
| 学期代码 | 学期名称 | 时间范围 | 说明 |
|----------|----------|----------|------|
| 0 | 第一学期 | 9月-次年1月 | 秋季学期 |
| 1 | 第二学期 | 2月-7月 | 春季学期 |
| 2 | 第三学期 | 7月-8月 | 夏季学期（短学期） |

### 周次格式说明
- **连续周次**：1-5表示第1周到第5周
- **分段周次**：1-5,8-18表示第1-5周和第8-18周
- **单周**：搭配dsz=1使用
- **双周**：搭配dsz=2使用
- **全周**：搭配dsz=0使用

### 节次格式说明
- **连续节次**：1-2表示第1-2节课
- **单节次**：3表示第3节课
- **分散节次**：1,3,5表示第1、3、5节课

### 大节格式说明（kxy格式）
- **格式结构**：kxy，k为前缀，x表示星期几，y表示第几大节
- **星期代码**：1-7分别表示周一到周日
- **大节编号**：1-5表示第1-5大节
- **示例**：K12表示星期一第二大节

## 上课时间说明

### 标准上课时间
| 大节 | 节次 | 时间范围 | 说明 |
|------|------|----------|------|
| 1 | 1-2节 | 08:00-09:40 | 上午第一大节 |
| 2 | 3-4节 | 10:00-11:40 | 上午第二大节 |
| 3 | 5-6节 | 14:00-15:40 | 下午第一大节 |
| 4 | 7-8节 | 16:00-17:40 | 下午第二大节 |
| 5 | 9-10节 | 19:00-20:40 | 晚上第一大节 |

### 星期对应关系
| 星期代码 | 星期名称 | 大节前缀 |
|----------|----------|----------|
| 1 | 星期一 | K1x |
| 2 | 星期二 | K2x |
| 3 | 星期三 | K3x |
| 4 | 星期四 | K4x |
| 5 | 星期五 | K5x |
| 6 | 星期六 | K6x |
| 7 | 星期日 | K7x |

## 单双周说明

### 单双周类型
| dsz值 | 类型 | 说明 |
|-------|------|------|
| 0 | 全周 | 每周都上课 |
| 1 | 单周 | 只在单周上课（第1、3、5...周） |
| 2 | 双周 | 只在双周上课（第2、4、6...周） |

### 应用场景
- **全周课程**：理论课程，每周需要上课
- **单双周课程**：实验课程、讨论课等，隔周进行

## 调课信息说明

### 调课标志（tk_flag）
| 标志值 | 说明 | 含义 |
|--------|------|------|
| 1 | 已调课 | 该课程安排已经调整 |
| 0 | 未调课 | 该课程安排未调整 |

### 调课原因（TKYY）
- **教师原因**：教师临时有事、出差等
- **学生原因**：学生活动、考试冲突等
- **场地原因**：教室设备故障、场地占用等
- **其他原因**：天气原因、突发事件等

## 考试方式说明

### 常见考试方式
- **考试**：闭卷或开卷考试
- **考查**：平时成绩综合评定
- **实操**：实际操作考核
- **论文**：课程论文或报告
- **作品**：课程作品或设计

## 数据约束

1. **主键约束**：复合主键必须唯一
2. **非空约束**：主键字段必须非空
3. **时间约束**：调课时间应符合合理的时间范围
4. **人数约束**：上课班级人数应为正数
5. **学时约束**：讲授学时应为非负数

## 索引建议

- **复合主键索引**：`xn, xq_id, user_kcdm, stimezc, jcz, room_DM` - 主键自动创建唯一索引
- **教师索引**：`zjjs_gh` - 用于查询教师课表
- **班级索引**：`user_bjdm` - 用于查询班级课表
- **教室索引**：`room_DM` - 用于查询教室使用情况
- **时间索引**：`stimezc, jcz` - 用于按时间查询课表
- **课程索引**：`user_kcdm` - 用于查询课程安排
- **调课索引**：`tk_flag, tk_time` - 用于查询调课记录

## 数据关联关系

### 主要外键关联
- **课程信息表**：通过 `user_kcdm` 关联课程详细信息
- **教师信息表**：通过 `zjjs_gh` 关联教师基本信息
- **班级信息表**：通过 `user_bjdm` 关联班级详细信息
- **教室信息表**：通过 `room_DM` 关联教室详细信息

### 业务关联
- **学生课表表**：关联学生的个人课表
- **考试安排表**：关联课程的考试安排
- **教学计划表**：关联学期的教学计划
- **教师工作量表**：统计教师的教学工作量

## 使用示例

### SQL查询示例

```sql
-- 查询某教师的完整课表
SELECT xn, xq_id, kcmc, stimezc, jcz, room, skbj, bjmc
FROM EDU_SCHEDULE
WHERE zjjs_gh = 'T001' AND xn = '2024' AND xq_id = '0'
ORDER BY jcz, stimezc;

-- 查询某班级的课表
SELECT stimezc, jcz, kcmc, zjjs_xm, room, dsz
FROM EDU_SCHEDULE
WHERE user_bjdm = 'CS202401' AND xn = '2024' AND xq_id = '0'
ORDER BY jcz, stimezc;

-- 查询某教室的使用情况
SELECT stimezc, jcz, kcmc, zjjs_xm, skbj, bjmc
FROM EDU_SCHEDULE
WHERE room_DM = 'J101' AND xn = '2024' AND xq_id = '0'
ORDER BY stimezc, jcz;

-- 查询调课记录
SELECT xn, xq_id, kcmc, zjjs_xm, stimezc, tk_time, TKYY
FROM EDU_SCHEDULE
WHERE tk_flag = '1' AND xn = '2024'
ORDER BY tk_time DESC;

-- 统计教师工作量
SELECT
    zjjs_gh,
    zjjs_xm,
    COUNT(DISTINCT user_kcdm) as course_count,
    SUM(xf) as total_credits,
    SUM(jsxs) as total_hours,
    COUNT(DISTINCT user_bjdm) as class_count
FROM EDU_SCHEDULE
WHERE xn = '2024' AND xq_id = '0'
GROUP BY zjjs_gh, zjjs_xm
ORDER BY total_hours DESC;

-- 查询时间冲突检测
SELECT
    jcz,
    room,
    COUNT(*) as conflict_count,
    GROUP_CONCAT(kcmc) as conflict_courses
FROM EDU_SCHEDULE
WHERE xn = '2024' AND xq_id = '0' AND stimezc LIKE '%1%'
GROUP BY jcz, room
HAVING COUNT(*) > 1;
```

### 数据插入示例

```sql
INSERT INTO EDU_SCHEDULE (
    xn, xq_id, user_kcdm, kcmc, skbj, zjjs_gh, zjjs_xm,
    user_bjdm, bjmc, stimezc, dsz, jcinfo, jcz,
    room_DM, room, SKBJRS, KHFS, xf, jsxs
) VALUES (
    '2024', '0', 'CS001', '数据结构', 'S001', 'T001', '张老师',
    'CS202401', '计算机2024级1班', '1-16', '0', '1-2', 'K11',
    'J101', '教101', 45, '考试', 4.0, 64.0
);
```

## 业务逻辑说明

### 课表编排原则
1. **时间合理**：避免教师和学生时间冲突
2. **教室匹配**：根据课程性质选择合适的教室
3. **教师均衡**：均衡分配教师的教学任务
4. **班级连续**：尽量保持班级课程的连续性

### 调课流程
1. **申请调课**：教师或院系提出调课申请
2. **审核批准**：教务部门审核并批准
3. **调整安排**：调整课表中的相关记录
4. **通知发布**：发布调课通知
5. **记录更新**：更新调课标志和时间

### 冲突检测
1. **教师冲突**：同一教师同一时间安排多门课程
2. **班级冲突**：同一班级同一时间安排多门课程
3. **教室冲突**：同一教室同一时间安排多门课程
4. **学生冲突**：学生选课中的时间冲突

## 数据维护建议

### 定期维护
1. **课表更新**：及时更新课表变化
2. **信息核对**：定期核对课表信息准确性
3. **调课记录**：完整记录调课历史
4. **数据备份**：定期备份课表数据

### 异常处理
1. **冲突检测**：定期检测和处理课表冲突
2. **信息错误**：纠正错误的课表信息
3. **调课未记录**：补充未记录的调课信息
4. **数据重复**：检查并处理重复的课表记录

### 质量控制
1. **完整性检查**：确保课表信息完整
2. **一致性检查**：确保相关数据一致
3. **准确性检查**：确保课表安排准确
4. **及时性检查**：确保更新及时

---

**数据来源**：教务管理系统、课表管理系统
**维护单位**：教务处、各院系教学秘书
**更新频率**：学期初集中编排，平时调整实时更新